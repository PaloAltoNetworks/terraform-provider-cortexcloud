---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "cortexcloud_authentication_settings Resource - Cortex Cloud Provider"
subcategory: ""
description: |-
  Manages an Authentication Settings configuration.
---

# cortexcloud_authentication_settings (Resource)

Manages an Authentication Settings configuration.

## Example Usage

```terraform
# Basic SAML authentication settings configuration
resource "cortexcloud_authentication_settings" "example" {
  name   = "corporate-sso"
  domain = "example.com"

  # SAML attribute mappings
  mappings {
    email      = "emailaddress"
    first_name = "givenname"
    last_name  = "surname"
    group_name = "groups"
  }

  # IdP configuration
  idp_issuer      = "https://idp.example.com"
  idp_sso_url     = "https://idp.example.com/sso"
  idp_certificate = file("${path.module}/idp-certificate.pem")

  # Default role for authenticated users
  default_role = "viewer"
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `domain` (String) The email domain to associate with this IDP.

When configuring the very first SSO integration, this value should be empty as it will be used as the default SSO with a fixed, read-only value. 

When logging in, users are redirected to the IdP associated with this domain, or to the default IdP if no association exists.
- `mappings` (Attributes) Attribute mappings dictated by your organization's IdP. (see [below for nested schema](#nestedatt--mappings))
- `name` (String) The name of the SSO integration.

### Optional

- `advanced_settings` (Attributes) Optional advanced settings that may be relevant for a specific IdP. (see [below for nested schema](#nestedatt--advanced_settings))
- `default_role` (String) The default role automatically assigned to every user who authenticates to Cortex using SAML. This is an inherited role and is not the same as a direct role assigned to the user.

If a role with the same name exists on both Cortex Gateway and the tenant, the role will mapped to the role from the tenant. If you want to specifically use the role from Cortex Gateway, set the `is_account_role` parameter to `true`.
- `idp_certificate` (String) The Idp's public X.509 digital certificate in PEM format for verification, which is copied from your organization's IdP.
- `idp_issuer` (String) The unique identifier of the IdP issuing SAML assertions, which is copied from your organization's IdP.
- `idp_sso_url` (String) The login URL of your IdP. This should be copied from the SAML integration configuration on the IdP.

Example values:
- Okta: `https://cortex-test.okta.com/app/cortex-test/eacbt6b2jj08CasdUQ7sdf15d7/sso/SAML`
- Microsoft Azure: `https://login.microsoftonline.com/6a5a9780-96a4-41ef-bf45-0535d8a70025/saml2`
- `is_account_role` (Boolean) Whether the specified default role exists in Cortex Gateway or in the tenant. Set to `true` if the role was created in Cortex Gateway or `false` if the role was created in the tenant. Defaults to false.
- `metadata_url` (String) The metadata URL provides information about hte IdP's capabilities, endpoints, keys, and more. 

Example values: 
- Okta: `https://cortex-test.okta.com/app/exkbuuzw77Bh04V6M6b8/sso/saml/metadata`
- Microsoft Azure: `https://login.microsoftonline.com/6a5a9780-96a4-41ef-bf45-0535d8a70025/saml2/metadata`

### Read-Only

- `idp_enabled` (Boolean) Whether the IdP is enabled. Defaults to `true`.
- `sp_entity_id` (String) The service provider entity ID.
- `sp_logout_url` (String) The service provider logout URL.
- `sp_url` (String) The service provider URL.
- `tenant_id` (String) The UUID of the tenant.

<a id="nestedatt--mappings"></a>
### Nested Schema for `mappings`

Required:

- `email` (String) The IdP attribute mapped to the user's email address in the Syslog server.
- `first_name` (String) The IdP attribute mapped to the user's first name.
- `group_name` (String) The IdP attribute mapped to the user's group membership for authorization.

Cortex requires the IdP to send the group membership as part of the SAML token. Some IdPs send values in a format that include a comma, which is not compatible with Cortex. To resolve this, you must configure your IdP to send a single value without a comma for each group membership. For example, if your IdP sends the Group DN (a comma-separated list) by default, you must configure the IdP to send the Group CN (Common Name) instead.
- `last_name` (String) The IdP attribute mapped to the user's last name.


<a id="nestedatt--advanced_settings"></a>
### Nested Schema for `advanced_settings`

Optional:

- `authn_context_enabled` (Boolean) Whether to remove the `RequestedAuthnContext` parameter from SAML requests.

If set to `true`, users will be able to log in using additional authentication methods.
- `force_authn` (Boolean) Whether to force users to re-authenticate in order to access the Cortex tenant if requested by the IdP (even if they already authenticated to access other applications).
- `idp_single_logout_url` (String) The URL of the IdP's Single Logout endpoint. Configuring this ensures that when a user logs out of Cortex, the IdP logs the user out of all applications in the current identity provider login session.
- `relay_state` (String) The URL that users will be directed to after they've been authenticated by your organization's IdP and log into Cortex.
- `service_provider_private_key` (String) The syslog server's private key in PEM format for signing SAML responses. This is most relevant for the integration of Azure Directory Federation Services (ADFS).
- `service_provider_public_cert` (String) The syslog server's public X.509 certificate in PEM format for IdP validation.
