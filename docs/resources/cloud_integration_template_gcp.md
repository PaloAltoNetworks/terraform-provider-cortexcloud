---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "cortexcloud_cloud_integration_template_gcp Resource - Cortex Cloud Provider"
subcategory: ""
description: |-
  Manages a cloud onboarding integration template for GCP.
---

# cortexcloud_cloud_integration_template_gcp (Resource)

Manages a cloud onboarding integration template for GCP.

## Example Usage

```terraform
# GCP folder onboarding template.
#
# This template will be created with the following configuration:
#   - Instance name of "GCP Folder"
#   - Scans scoped to:
#     - us-east7 and europe-west10 regions
#     - all projects that do NOT have the following ID values:
#       - test-app-1
#       - soc-automation
#   - All additional capabilities enabled
#       - Registry scanning configured to initially scan all discovered 
#         container images, including all versions (tags), in all discovered
#         GCP Artifact Registry repositories
#   - Audit log (GCP Pub/Sub) collection enabled 
#   - The "environment" tag with the value "production" will be applied to all 
#     resources created by Cortex Cloud in the target Azure environment
#       - An additional "managed_by" tag with the value "paloaltonetworks" is
#         applied by default for all onboarded CSP environments
resource "cortexcloud_cloud_integration_template_gcp" "folder" {
  scope         = "ACCOUNT_GROUP"
  instance_name = "GCP Folder"
  scan_mode     = "MANAGED"
  scope_modifications = {
    regions = {
      enabled = true
      type    = "INCLUDE"
      regions = [
        "us-east7",
        "europe-west10",
      ]
    }
    projects = {
      enabled = true
      type    = "EXCLUDE"
      project_ids = [
        "test-app-1",
        "soc-automation",
      ]
    }
  }
  additional_capabilities = {
    data_security_posture_management = true
    registry_scanning                = true
    registry_scanning_options = {
      type = "ALL"
    }
    xsiam_analytics         = true
    agentless_disk_scanning = true
    serverless_scanning     = true
  }
  collection_configuration = {
    audit_logs = {
      enabled = true
    }
  }
  custom_resources_tags = [
    {
      key   = "environment"
      value = "production"
    },
  ]
}
```

```terraform
# GCP organization onboarding template.
#
# This template will be created with the following configuration:
#   - Instance name of "GCP Organization"
#   - Scans scoped to:
#     - us-east7 and europe-west10 regions
#     - all projects that do NOT have the following ID values:
#       - test-app-1
#       - soc-automation
#   - All additional capabilities enabled
#       - Registry scanning configured to scan only container images that were
#         created or modified in the last 30 days within the discovered GCP
#         Artifact Registry repositories
#   - Audit log (GCP Pub/Sub) collection enabled 
#   - The "environment" tag with the value "production" will be applied to all 
#     resources created by Cortex Cloud in the target Azure environment
#       - An additional "managed_by" tag with the value "paloaltonetworks" is
#         applied by default for all onboarded CSP environments
resource "cortexcloud_cloud_integration_template_gcp" "organization" {
  scope         = "ORGANIZATION"
  instance_name = "GCP Organization"
  scan_mode     = "MANAGED"
  scope_modifications = {
    regions = {
      enabled = true
      type    = "INCLUDE"
      regions = [
        "us-east7",
        "europe-west10",
      ]
    }
    projects = {
      enabled = true
      type    = "EXCLUDE"
      project_ids = [
        "test-app-1",
        "soc-automation",
      ]
    }
  }
  additional_capabilities = {
    data_security_posture_management = true
    registry_scanning                = true
    registry_scanning_options = {
      type      = "TAGS_MODIFIED_DAYS"
      last_days = 30
    }
    xsiam_analytics         = true
    agentless_disk_scanning = true
    serverless_scanning     = true
  }
  collection_configuration = {
    audit_logs = {
      enabled = true
    }
  }
  custom_resources_tags = [
    {
      key   = "environment"
      value = "production"
    },
  ]
}
```

```terraform
# GCP project onboarding template.
#
# This template will be created with the following configuration:
#   - Instance name of "GCP Project"
#   - Scans scoped to the us-east7 and europe-west10 regions
#   - All additional capabilities enabled
#       - Registry scanning configured to initially scan all discovered 
#         container images, including all versions (tags), in all discovered
#         GCP Artifact Registry repositories
#   - Audit log (GCP Pub/Sub) collection enabled 
#   - The "environment" tag with the value "production" will be applied to all 
#     resources created by Cortex Cloud in the target Azure environment
#       - An additional "managed_by" tag with the value "paloaltonetworks" is
#         applied by default for all onboarded CSP environments
resource "cortexcloud_cloud_integration_template_gcp" "project" {
  scope         = "ACCOUNT"
  instance_name = "GCP Project"
  scan_mode     = "MANAGED"
  scope_modifications = {
    regions = {
      enabled = true
      type    = "INCLUDE"
      regions = [
        "us-east7",
        "europe-west10",
      ]
    }
  }
  additional_capabilities = {
    data_security_posture_management = true
    registry_scanning                = true
    registry_scanning_options = {
      type = "ALL"
    }
    xsiam_analytics         = true
    agentless_disk_scanning = true
    serverless_scanning     = true
  }
  collection_configuration = {
    audit_logs = {
      enabled = true
    }
  }
  custom_resources_tags = [
    {
      key   = "environment"
      value = "production"
    },
  ]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `scan_mode` (String) Define what infrastructure the integration will use to scan cloud workloads. If set to `MANAGED`, scanning will be done in the Cortex Cloud environment. If set to `OUTPOST`, scanning will be done on infrastructure deployed to a cloud account owned by you. Possible values are: `MANAGED`, `OUTPOST`. 

~>**NOTE** Scanning with an outpost may require additional CSP permissions and may incur additional costs.
- `scope` (String) Define the scope for this integration instance. Possible values are: `ACCOUNT`, `ACCOUNT_GROUP`, `ORGANIZATION`

### Optional

- `additional_capabilities` (Attributes) Define which additional security capabilities to enable. 

~>**NOTE** that adding additional capabilities typically requires additional cloud provider permissions. For more information, refer to the [Cortex Cloud Posture Management documentation](https://docs-cortex.paloaltonetworks.com/r/Cortex-CLOUD/Cortex-Cloud-Posture-Management-Documentation/Cloud-service-provider-permissions). (see [below for nested schema](#nestedatt--additional_capabilities))
- `collection_configuration` (Attributes) Configure log data collection. (see [below for nested schema](#nestedatt--collection_configuration))
- `custom_resources_tags` (Attributes Set) Tags applied to any new resource created by Cortex Cloud in the cloud environment.

The tag `managed_by` with the value `paloaltonetworks` will be applied by default. (see [below for nested schema](#nestedatt--custom_resources_tags))
- `instance_name` (String) The name of the integration template. When the template is executed, integrations will appear in the console with this value.
- `outpost_id` (String) The ID of the outpost that will be used for scanning. Must be configured if `scan_mode` is set to `OUTPOST`.
- `scope_modifications` (Attributes) Define the scope of scans by including/excluding projects or regions. (see [below for nested schema](#nestedatt--scope_modifications))

### Read-Only

- `status` (String) Status of the template.
- `terraform_module_url` (String) The full URL returned by Cortex Cloud when selecting the Terraform method of downloading the template. Opening this URL in your browser will begin a download of the created template as a Terraform module, which you can then apply to permit Cortex Cloud to scan your Azure resources.
- `tracking_guid` (String) The unique ID value assigned to this template after creation.

<a id="nestedatt--additional_capabilities"></a>
### Nested Schema for `additional_capabilities`

Optional:

- `agentless_disk_scanning` (Boolean) Whether to enable agentless disk scanning to remotely detect and remediate vulnerabilities during the development lifecycle. Default value is `true`.

It is strongly recommended that you keep enable this feature enabled.
- `data_security_posture_management` (Boolean) Whether to enable data security posture management, an agentless data security scanner that discovers, classifies, protects, and governs sensitive data. Default value is `true`.
- `registry_scanning` (Boolean) Whether to enable registry scanning, a container registry scanner that scans registry images for vulnerabilities, malware, and secrets. Default value is `true`.
- `registry_scanning_options` (Attributes) Additional configuration options forregistry scanning. (see [below for nested schema](#nestedatt--additional_capabilities--registry_scanning_options))
- `serverless_scanning` (Boolean) Whether to enable agentless disk scanning to remotely detect and remediate vulnerabilities during the development lifecycle. Default value is `true`.
- `xsiam_analytics` (Boolean) Whether to enable XSIAM analytics to analyze your endpoint data to develop a baseline and raise Analytics and Analytics BIOC alerts when anomalies and malicious behaviors are detected. Default value is `true`.

<a id="nestedatt--additional_capabilities--registry_scanning_options"></a>
### Nested Schema for `additional_capabilities.registry_scanning_options`

Required:

- `type` (String) Type of registry scanning.

Optional:

- `last_days` (Number) Number of days within which the tags on a registry image must have been created or updated for the image to be scanned. Minimum value is 0 and maximum value is 90. Cannot be configured if `type` is not set to `TAGS_MODIFIED_DAYS`.



<a id="nestedatt--collection_configuration"></a>
### Nested Schema for `collection_configuration`

Required:

- `audit_logs` (Attributes) Configuration for audit logs collection. (see [below for nested schema](#nestedatt--collection_configuration--audit_logs))

<a id="nestedatt--collection_configuration--audit_logs"></a>
### Nested Schema for `collection_configuration.audit_logs`

Optional:

- `collection_method` (String) Method of audit log collection. Default value is `AUTOMATED`.
- `data_events` (Boolean) Whether to collect data events as part of audit log collection. Default value is `false`.
- `enabled` (Boolean) Whether to enable audit log collection. Default value is `true`.



<a id="nestedatt--custom_resources_tags"></a>
### Nested Schema for `custom_resources_tags`

Required:

- `key` (String) The tag key.
- `value` (String) The tag value.


<a id="nestedatt--scope_modifications"></a>
### Nested Schema for `scope_modifications`

Optional:

- `projects` (Attributes) Configuration for project-level scope modifications for GCP integrations. (see [below for nested schema](#nestedatt--scope_modifications--projects))
- `regions` (Attributes) Configuration for scoping scans to specific regions or excluding specific regions from scans. (see [below for nested schema](#nestedatt--scope_modifications--regions))

<a id="nestedatt--scope_modifications--projects"></a>
### Nested Schema for `scope_modifications.projects`

Required:

- `enabled` (Boolean) Whether to enable this scope modification. Cannot be set to `true` if scope is set to `project`. If enabled, the `type` and `project_ids` attributes must be configured as well.

Optional:

- `project_ids` (Set of String) Project IDs to include or exclude from scans. Cannot be configured if scope is set to `ACCOUNT`. If scope is set to `ORGANIZATION` or `ACCOUNT_GROUP` and enabled is set to `true`, it must be configured with at least 1 value.
- `type` (String) Whether the specified project IDs should be included in the scope or excluded from the scope. Must be configured if `enabled` is set to `true` and scope is not set to `ACCOUNT`. Possible values are: `INCLUDE`, `EXCLUDE`


<a id="nestedatt--scope_modifications--regions"></a>
### Nested Schema for `scope_modifications.regions`

Required:

- `enabled` (Boolean) Whether to enable this scope modification. If set to `true`, the `type` and `regions` attributes must be configured as well.

Optional:

- `regions` (Set of String) Regions to include or exclude from scans. Must be configured with at least 1 value if `enabled` is set to `true`.
- `type` (String) Whether the specified regions should be included in the scope or excluded from the scope. Must be configured if `enabled` is set to `true`. Possible values are: `INCLUDE`, `EXCLUDE`
